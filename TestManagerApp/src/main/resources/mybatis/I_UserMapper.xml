<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 自定义数据库操作	-->
<mapper namespace="cn.orditech.dao.impl.UserDaoImpl">
    <sql id="table">USER </sql>
    <sql id="insertFields">acount, password, name, sex, department,type,gmtCreate,gmtModified
    </sql>
    <sql id="selectFields">id,acount, password, name, sex, department,type,gmtCreate,gmtModified
    </sql>
    
    <insert id="insert">
        INSERT
        <include refid="table"/>
        <include refid="insertFields"/>
        VALUES (#{account},#{password},#{name},#{sex},#{department},#{type},#{gmtCreate},#{gmtModified})
    </insert>
    
    <select id="selectByUserIdAndOffset" resultType="cn.orditech.entity.User">
        SELECT
        <include refid="selectFields"/>
        FROM
        <include refid="table"/>

        <if test="userId != 0">
            WHERE user_id = #{userId}
        </if>
        ORDER BY id DESC
        LIMIT #{offset},#{limit}
    </select>
    <update id="updateNews">
        UPDATE
        <include refid="table"/>
        SET comment_count = #{commentCount}
        WHERE id = #{id}
    </update>
</mapper>

